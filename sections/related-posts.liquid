{%- assign blog = blogs[section.settings.blog] -%}

{%- if blog.articles_count > 0 -%}

  <section {% if section.settings.background_colour %} style="background: {{section.settings.background_colour}}" {% endif %}>
    <div class="container py-5">
    {% if section.settings.title %}
      <h2 class="mb-4 pb-2 blog-title gkit-h1 text-left text-white font-weight-bold">{{ section.settings.title }}</h2>
    {% endif %}
    <div class="d-flex flex-column flex-md-row readMoreHowTo">
      {%- for article in blog.articles limit: 3 -%}
        <div class="d-flex flex-column justify-content-between px-0 px-md-5 pb-5 pb-md-0 w-100">
          <a href="{{ article.url }}">
            <div class="howToSquareImage" style="background-image: url('{{ article.image | img_url: '900x900', crop: 'center' }}')"></div>
          </a>
          <div class="d-flex flex-column justify-content-between flex-grow-1">
            <div>
              <p class="mt-4 mb-2 gkit-h3 text-white">{{ article.title }}</p>
              {% if article.excerpt %}<p class="gkit-p-17 article-description">{{article.excerpt}}</p>{% endif %}
            </div>
            <div>
              <a href="{{ article.url }}" class="btn gkit-btn gkit-btn-sm gkit-secondary gkit-white text-white mt-1">{% if section.settings.button_text %}{{section.settings.button_text}}{% else %}Find out how{% endif %}</a>
            </div>
          </div>
        </div>
      {%- endfor -%}
    </div>
    </div>
  </section>

{%- endif -%}


{% schema %}
{
  "name": "Featured articles",
  "settings": [
    {
      "type": "text",
      "id": "title",
      "default": "More Guides.",
      "label": "Title"
    },
    {
      "type": "color",
      "id": "background_colour",
      "default": "#2D2926",
      "label": "Background colour"
    },
    {
      "type": "text",
      "id": "button_text",
      "default": "Read",
      "label": "Button text"
    },
    {
      "type": "blog",
      "id": "blog",
      "label": "Blog for read more"
    }
  ]
}
{% endschema %}
